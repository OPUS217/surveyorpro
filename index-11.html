Id) navigator.geolocation.clearWatch(watchId);
        }

        // PROFESSIONAL COORDINATE CONVERSION
        function updatePlotDatum() {
            const datum = document.getElementById('datum').value;
            const zone = document.getElementById('utmZone').value;
            const hemisphere = document.getElementById('hemisphere').value;
            document.getElementById('plotDatum').textContent = `${datum}, UTM Zone ${zone}, ${hemisphere === 'N' ? 'Northern' : 'Southern'} Hemisphere`;
        }

        function convertToUTM() {
            const lat = parseFloat(document.getElementById('inputLat').value);
            const lon = parseFloat(document.getElementById('inputLon').value);
            const elev = parseFloat(document.getElementById('inputElev').value) || 0;
            
            if (isNaN(lat) || isNaN(lon)) {
                showBanner('Enter valid N and E coordinates', 'error');
                return;
            }

            const zone = Math.floor((lon + 180) / 6) + 1;
            const Œª0 = (zone - 1) * 6 - 180 + 3;
            const k0 = 0.9996;
            const a = 6378137;
            const e = 0.081819191;
            const e2 = e * e;
            
            const œÜ = lat * Math.PI / 180;
            const Œª = lon * Math.PI / 180;
            const Œª0Rad = Œª0 * Math.PI / 180;
            
            const N = a / Math.sqrt(1 - e2 * Math.sin(œÜ) * Math.sin(œÜ));
            const T = Math.tan(œÜ) * Math.tan(œÜ);
            const C = e2 * Math.cos(œÜ) * Math.cos(œÜ) / (1 - e2);
            const A = (Œª - Œª0Rad) * Math.cos(œÜ);
            
            const M = a * ((1 - e2/4 - 3*e2*e2/64 - 5*e2*e2*e2/256) * œÜ
                - (3*e2/8 + 3*e2*e2/32 + 45*e2*e2*e2/1024) * Math.sin(2*œÜ)
                + (15*e2*e2/256 + 45*e2*e2*e2/1024) * Math.sin(4*œÜ)
                - (35*e2*e2*e2/3072) * Math.sin(6*œÜ));
            
            const easting = k0 * N * (A + (1-T+C)*A*A*A/6 + (5-18*T+T*T+72*C-58*e2/(1-e2))*A*A*A*A*A/120) + 500000;
            const northing = k0 * (M + N*Math.tan(œÜ)*(A*A/2 + (5-T+9*C+4*C*C)*A*A*A*A/24 + (61-58*T+T*T+600*C-330*e2/(1-e2))*A*A*A*A*A*A/720));
            
            const datum = document.getElementById('datum').value;
            const selectedZone = document.getElementById('utmZone').value;

            document.getElementById('utmResult').classList.remove('hidden');
            document.getElementById('utmResult').innerHTML = `
                <div class="space-y-3">
                    <div class="bg-white p-4 rounded-lg border-2 border-blue-400">
                        <p class="text-sm text-gray-600 mb-1">Datum & Projection</p>
                        <p class="font-bold text-blue-900">${datum} | UTM Zone ${zone}N</p>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-white p-4 rounded-lg">
                            <p class="text-xs text-gray-500">Northing (N)</p>
                            <p class="text-xl font-bold text-blue-800 font-mono">${northing.toFixed(3)}</p>
                            <p class="text-xs text-gray-500">meters</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg">
                            <p class="text-xs text-gray-500">Easting (E)</p>
                            <p class="text-xl font-bold text-blue-800 font-mono">${easting.toFixed(3)}</p>
                            <p class="text-xs text-gray-500">meters</p>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg">
                        <p class="text-xs text-gray-500">Zone</p>
                        <p class="text-lg font-bold">${zone} (${zone === 31 ? 'West Belt' : zone === 32 ? 'Mid Belt' : 'East Belt'})</p>
                    </div>
                    ${elev ? `<div class="bg-white p-4 rounded-lg">
                        <p class="text-xs text-gray-500">Elevation (Z)</p>
                        <p class="text-lg font-bold">${elev.toFixed(3)} m</p>
                    </div>` : ''}
                </div>
            `;
            showBanner('‚úì Converted to UTM successfully!');
        }

        function convertToLatLon() {
            const northing = parseFloat(document.getElementById('inputNorthing').value);
            const easting = parseFloat(document.getElementById('inputEasting').value);
            const zone = parseInt(document.getElementById('inputZone').value);
            
            if (isNaN(northing) || isNaN(easting)) {
                showBanner('Enter valid N and E values', 'error');
                return;
            }

            const k0 = 0.9996;
            const a = 6378137;
            const e = 0.081819191;
            const e2 = e * e;
            
            const x = easting - 500000;
            const y = northing;
            
            const M = y / k0;
            const Œº = M / (a * (1 - e2/4 - 3*e2*e2/64 - 5*e2*e2*e2/256));
            
            const œÜ1 = Œº + (3*e/2 - 27*e*e*e/32) * Math.sin(2*Œº)
                + (21*e*e/16 - 55*e*e*e*e/32) * Math.sin(4*Œº)
                + (151*e*e*e/96) * Math.sin(6*Œº);
            
            const N1 = a / Math.sqrt(1 - e2 * Math.sin(œÜ1) * Math.sin(œÜ1));
            const T1 = Math.tan(œÜ1) * Math.tan(œÜ1);
            const C1 = e2 * Math.cos(œÜ1) * Math.cos(œÜ1) / (1 - e2);
            const R1 = a * (1 - e2) / Math.pow(1 - e2 * Math.sin(œÜ1) * Math.sin(œÜ1), 1.5);
            const D = x / (N1 * k0);
            
            let lat = œÜ1 - (N1 * Math.tan(œÜ1) / R1) * (D*D/2 - (5+3*T1+10*C1-4*C1*C1-9*e2/(1-e2))*D*D*D*D/24
                + (61+90*T1+298*C1+45*T1*T1-252*e2/(1-e2)-3*C1*C1)*D*D*D*D*D*D/720);
            
            let lon = (D - (1+2*T1+C1)*D*D*D/6 + (5-2*C1+28*T1-3*C1*C1+8*e2/(1-e2)+24*T1*T1)*D*D*D*D*D/120) / Math.cos(œÜ1);
            
            lat = lat * 180 / Math.PI;
            lon = lon * 180 / Math.PI + (zone - 1) * 6 - 180 + 3;

            const datum = document.getElementById('datum').value;

            document.getElementById('latLonResult').classList.remove('hidden');
            document.getElementById('latLonResult').innerHTML = `
                <div class="space-y-3">
                    <div class="bg-white p-4 rounded-lg border-2 border-green-400">
                        <p class="text-sm text-gray-600 mb-1">Datum & Projection</p>
                        <p class="font-bold text-green-900">${datum} | Geographic Coordinates</p>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-white p-4 rounded-lg">
                            <p class="text-xs text-gray-500">Latitude (N)</p>
                            <p class="text-xl font-bold text-green-800 font-mono">${lat.toFixed(7)}¬∞</p>
                            <p class="text-xs text-gray-500">decimal degrees</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg">
                            <p class="text-xs text-gray-500">Longitude (E)</p>
                            <p class="text-xl font-bold text-green-800 font-mono">${lon.toFixed(7)}¬∞</p>
                            <p class="text-xs text-gray-500">decimal degrees</p>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg">
                        <p class="text-xs text-gray-500">DMS Format</p>
                        <p class="font-mono">${decimalToDMS(lat, 'lat')} N, ${decimalToDMS(lon, 'lon')} E</p>
                    </div>
                </div>
            `;
            showBanner('‚úì Converted to Lat/Lon successfully!');
        }

        function decimalToDMS(decimal, type) {
            const absolute = Math.abs(decimal);
            const degrees = Math.floor(absolute);
            const minutesNotTruncated = (absolute - degrees) * 60;
            const minutes = Math.floor(minutesNotTruncated);
            const seconds = ((minutesNotTruncated - minutes) * 60).toFixed(2);
            return `${degrees}¬∞ ${minutes}' ${seconds}"`;
        }

        function convertFormat() {
            const input = document.getElementById('coordInput').value.trim();
            if (!input) return showBanner('Enter coordinates', 'error');
            
            // Try to parse different formats
            let lat, lon;
            
            // Check for decimal degrees
            const ddMatch = input.match(/(-?\d+\.?\d*)[,\s]+(-?\d+\.?\d*)/);
            if (ddMatch) {
                lat = parseFloat(ddMatch[1]);
                lon = parseFloat(ddMatch[2]);
            }
            
            if (lat && lon) {
                const dmsLat = decimalToDMS(lat, 'lat');
                const dmsLon = decimalToDMS(lon, 'lon');
                
                document.getElementById('formatResult').classList.remove('hidden');
                document.getElementById('formatOutput').innerHTML = `
                    <div class="bg-purple-50 p-3 rounded-lg">
                        <p class="text-xs text-gray-600">Decimal Degrees (DD)</p>
                        <p class="font-mono font-bold">${lat.toFixed(7)}¬∞N, ${lon.toFixed(7)}¬∞E</p>
                    </div>
                    <div class="bg-purple-50 p-3 rounded-lg">
                        <p class="text-xs text-gray-600">Degrees Minutes Seconds (DMS)</p>
                        <p class="font-mono font-bold">${dmsLat}N, ${dmsLon}E</p>
                    </div>
                    <div class="bg-purple-50 p-3 rounded-lg">
                        <p class="text-xs text-gray-600">Degrees Decimal Minutes (DDM)</p>
                        <p class="font-mono font-bold">${Math.floor(Math.abs(lat))}¬∞ ${((Math.abs(lat) % 1) * 60).toFixed(4)}'N, ${Math.floor(Math.abs(lon))}¬∞ ${((Math.abs(lon) % 1) * 60).toFixed(4)}'E</p>
                    </div>
                `;
                showBanner('‚úì Format converted!');
            } else {
                showBanner('Could not parse coordinates', 'error');
            }
        }

        // ADVANCED PLOT FUNCTIONS
        function addTraverseLine() {
            const container = document.getElementById('traverseLines');
            const newLine = document.createElement('div');
            newLine.className = 'grid grid-cols-3 gap-2';
            newLine.innerHTML = `
                <input type="number" placeholder="Bearing (¬∞)" class="traverse-bearing px-3 py-2 border rounded-lg text-sm">
                <input type="number" placeholder="Distance (m)" class="traverse-distance px-3 py-2 border rounded-lg text-sm">
                <button onclick="removeTraverseLine(this)" class="bg-red-600 text-white px-3 py-2 rounded-lg text-sm">‚àí</button>
            `;
            container.appendChild(newLine);
        }

        function removeTraverseLine(btn) {
            btn.parentElement.remove();
        }

        function calculateTraverse() {
            const startLat = parseFloat(document.getElementById('startLat').value);
            const startLon = parseFloat(document.getElementById('startLon').value);
            const plotOwner = document.getElementById('plotOwner').value.trim();
            const plotAddress = document.getElementById('plotAddress').value.trim();
            const plotNum = document.getElementById('plotNumber').value.trim();
            
            if (isNaN(startLat) || isNaN(startLon)) {
                return showBanner('Enter starting coordinates', 'error');
            }
            
            if (!plotOwner || !plotAddress) {
                return showBanner('Enter plot owner and address', 'error');
            }
            
            const bearings = Array.from(document.querySelectorAll('.traverse-bearing')).map(el => parseFloat(el.value));
            const distances = Array.from(document.querySelectorAll('.traverse-distance')).map(el => parseFloat(el.value));
            
            if (bearings.some(isNaN) || distances.some(isNaN)) {
                return showBanner('Enter all bearings and distances', 'error');
            }

            const traversePoints = [{lat: startLat, lon: startLon}];
            let currentLat = startLat;
            let currentLon = startLon;

            for (let i = 0; i < bearings.length; i++) {
                const bearing = bearings[i] * Math.PI / 180;
                const dist = distances[i];
                const R = 6371000;
                const Œ¥ = dist / R;
                const œÜ1 = currentLat * Math.PI / 180;
                const Œª1 = currentLon * Math.PI / 180;
                const œÜ2 = Math.asin(Math.sin(œÜ1) * Math.cos(Œ¥) + Math.cos(œÜ1) * Math.sin(Œ¥) * Math.cos(bearing));
                const Œª2 = Œª1 + Math.atan2(Math.sin(bearing) * Math.sin(Œ¥) * Math.cos(œÜ1), Math.cos(Œ¥) - Math.sin(œÜ1) * Math.sin(œÜ2));
                currentLat = œÜ2 * 180 / Math.PI;
                currentLon = Œª2 * 180 / Math.PI;
                traversePoints.push({lat: currentLat, lon: currentLon});
            }

            // Draw plot
            const canvas = document.getElementById('traverseCanvas');
            canvas.classList.remove('hidden');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const minLat = Math.min(...traversePoints.map(p => p.lat));
            const maxLat = Math.max(...traversePoints.map(p => p.lat));
            const minLon = Math.min(...traversePoints.map(p => p.lon));
            const maxLon = Math.max(...traversePoints.map(p => p.lon));
            
            const padding = 70;
            const scaleX = (canvas.width - 2 * padding) / (maxLon - minLon || 0.001);
            const scaleY = (canvas.height - 2 * padding) / (maxLat - minLat || 0.001);
            
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            ctx.beginPath();
            traversePoints.forEach((p, i) => {
                const x = padding + (p.lon - minLon) * scaleX;
                const y = canvas.height - (padding + (p.lat - minLat) * scaleY);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
            
            traversePoints.forEach((p, i) => {
                const x = padding + (p.lon - minLon) * scaleX;
                const y = canvas.height - (padding + (p.lat - minLat) * scaleY);
                ctx.fillStyle = i === 0 ? '#22c55e' : '#667eea';
                ctx.beginPath();
                ctx.arc(x, y, 6, 0, 2 * Math.PI);
                ctx.fill();
                ctx.fillStyle = '#000';
                ctx.font = 'bold 12px Arial';
                ctx.fillText(`P${i+1}`, x + 10, y - 10);
                if (i < bearings.length) {
                    ctx.font = '10px Arial';
                    ctx.fillStyle = '#666';
                    ctx.fillText(`${bearings[i].toFixed(1)}¬∞ / ${distances[i].toFixed(1)}m`, x + 10, y + 5);
                }
            });

            // Calculate area
            let area = 0;
            for (let i = 0; i < traversePoints.length - 1; i++) {
                const j = i + 1;
                area += traversePoints[i].lat * traversePoints[j].lon - traversePoints[j].lat * traversePoints[i].lon;
            }
            const areaM2 = Math.abs(area / 2) * 111320 * 111320 * Math.cos(traversePoints[0].lat * Math.PI / 180);
            const hectares = areaM2 / 10000;
            const acres = hectares * 2.47105;
            const plots = areaM2 / 500;

            let perimeter = 0;
            for (let i = 0; i < distances.length; i++) {
                perimeter += distances[i];
            }

            const today = new Date().toLocaleDateString('en-NG');
            const code = 'PLOT-' + Date.now().toString(36).toUpperCase();
            const datum = document.getElementById('datum').value;
            const zone = document.getElementById('utmZone').value;

            let resultHTML = `
                <div class="bg-white border-4 border-purple-600 rounded-xl p-8 shadow-2xl">
                    <div class="text-center mb-6 pb-4 border-b-2">
                        <h2 class="text-3xl font-black text-purple-800 mb-2">üìê PROFESSIONAL PLOT LAYOUT</h2>
                        <p class="text-sm text-gray-600">Surveypro - Licensed Professional Surveyors</p>
                        <p class="text-xs text-gray-500">${today} | Datum: ${datum} | Zone: ${zone}</p>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6 bg-purple-50 p-4 rounded-lg">
                        <div>
                            <p class="text-xs text-gray-500">Owner</p>
                            <p class="font-bold text-lg">${plotOwner}</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">Plot No.</p>
                            <p class="font-bold text-lg">${plotNum || 'N/A'}</p>
                        </div>
                        <div class="col-span-2">
                            <p class="text-xs text-gray-500">Location</p>
                            <p class="font-bold">${plotAddress}</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-4 gap-3 mb-6">
                        <div class="bg-blue-50 p-3 rounded-lg text-center">
                            <p class="text-xs">Hectares</p>
                            <p class="text-xl font-black text-blue-800">${hectares.toFixed(4)}</p>
                        </div>
                        <div class="bg-green-50 p-3 rounded-lg text-center">
                            <p class="text-xs">Acres</p>
                            <p class="text-xl font-black text-green-800">${acres.toFixed(4)}</p>
                        </div>
                        <div class="bg-yellow-50 p-3 rounded-lg text-center">
                            <p class="text-xs">m¬≤</p>
                            <p class="text-xl font-black text-yellow-800">${areaM2.toFixed(2)}</p>
                        </div>
                        <div class="bg-purple-50 p-3 rounded-lg text-center">
                            <p class="text-xs">Plots</p>
                            <p class="text-xl font-black text-purple-800">${plots.toFixed(2)}</p>
                        </div>
                    </div>

                    <div class="mb-6 bg-gray-50 p-3 rounded-lg text-center">
                        <p class="text-xs">Perimeter</p>
                        <p class="text-2xl font-black">${perimeter.toFixed(2)} m</p>
                    </div>
                    
                    <div class="overflow-x-auto mb-6">
                        <p class="font-bold text-center mb-3">TRAVERSE DATA</p>
                        <table class="w-full text-sm border-2">
                            <thead>
                                <tr class="bg-purple-100">
                                    <th class="border-2 p-3">Point</th>
                                    <th class="border-2 p-3">Bearing (¬∞)</th>
                                    <th class="border-2 p-3">Distance (m)</th>
                                    <th class="border-2 p-3">Latitude (N)</th>
                                    <th class="border-2 p-3">Longitude (E)</th>
                                </tr>
                            </thead>
                            <tbody>`;
            
            traversePoints.forEach((p, i) => {
                resultHTML += `
                    <tr class="${i % 2 === 0 ? 'bg-white' : 'bg-purple-50'}">
                        <td class="border-2 p-3 text-center font-bold">P${i+1}</td>
                        <td class="border-2 p-3 text-center">${i < bearings.length ? bearings[i].toFixed(2) : '-'}</td>
                        <td class="border-2 p-3 text-center">${i < distances.length ? distances[i].toFixed(2) : '-'}</td>
                        <td class="border-2 p-3 text-center font-mono">${p.lat.toFixed(7)}</td>
                        <td class="border-2 p-3 text-center font-mono">${p.lon.toFixed(7)}</td>
                    </tr>`;
            });
            
            resultHTML += `
                            </tbody>
                        </table>
                    </div>

                    <div class="bg-gradient-to-r from-purple-100 to-blue-100 p-4 rounded-lg text-center mb-4">
                        <p class="text-sm font-semibold">Verification Code</p>
                        <p class="text-2xl font-black font-mono text-purple-800">${code}</p>
                    </div>

                    <div class="border-t-2 pt-4 text-center text-xs text-gray-600">
                        <p class="font-semibold">üìç Surveypro Professional Surveyors</p>
                        <p>+234-811-755-4948 | opusarnold@gmail.com | Opay: 8117554948</p>
                    </div>
                </div>`;
            
            document.getElementById('traverseResult').classList.remove('hidden');
            document.getElementById('traverseResult').innerHTML = resultHTML;
            showBanner('‚úÖ Professional plot generated!');
        }

        // C OF O FUNCTIONS
        function goToSurveyorGeneral() {
            const states = {
                'Lagos': 'https://lagosstate.gov.ng/office-of-the-surveyor-general/',
                'FCT': 'https://fcda.gov.ng',
                'Ogun': 'https://ogunstate.gov.ng'
            };
            
            alert(`üèõÔ∏è OFFICIAL SURVEYOR GENERAL OFFICES:\n\nLagos: ${states.Lagos}\nFCT Abuja: ${states.FCT}\nOgun: ${states.Ogun}\n\nOpening Lagos office...`);
            window.open(states.Lagos, '_blank');
        }

        function verifyCofO() {
            const fileNum = document.getElementById('cofFile').value.trim();
            const coords = document.getElementById('cofCoords').value.trim();
            const registry = document.getElementById('cofRegistry').value.trim();

            if (!fileNum || !coords || !registry) return showBanner('Fill all fields', 'error');

            const warnings = [];
            if (!/^[A-Z]{2,4}\/\d{2,4}\/\d{2,6}$/.test(fileNum)) warnings.push('‚ö†Ô∏è Suspicious file format');

            document.getElementById('verifyResult').classList.remove('hidden');
            document.getElementById('verifyResult').innerHTML = `
                <div class="${warnings.length ? 'bg-yellow-50 border-yellow-300' : 'bg-green-50 border-green-300'} border-2 rounded-xl p-6">
                    <p class="text-2xl font-bold mb-2">${warnings.length ? '‚ö†Ô∏è Analysis Complete' : '‚úì No Issues Found'}</p>
                    ${warnings.length ? '<p class="text-sm mb-4">Document requires professional verification</p>' : ''}
                    <div class="bg-white p-4 rounded-lg text-sm">
                        <p><strong>File:</strong> ${fileNum}</p>
                        <p><strong>Coords:</strong> ${coords}</p>
                        <p><strong>Registry:</strong> ${registry}</p>
                    </div>
                    ${warnings.length ? '<div class="mt-4">' + warnings.join('<br>') + '</div>' : ''}
                </div>
            `;
        }

        function contactForVerification() {
            const msg = `C of O Verification Request\n\nI need professional C of O verification service.\n\nPlease contact me with pricing and timeline.`;
            openWhatsApp(msg);
        }

        // EQUIPMENT FUNCTIONS
        const equipment = [
            {name: 'Total Station', price: 15000, desc: 'High-precision theodolite'},
            {name: 'Survey Drone', price: 25000, desc: 'Professional mapping drone'},
            {name: 'GNSS Receiver', price: 20000, desc: 'RTK GPS receiver'},
            {name: 'Laser Scanner', price: 30000, desc: '3D laser scanner'}
        ];

        function initEquipment() {
            const html = equipment.map(item => `
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="font-bold text-lg mb-2">${item.name}</h3>
                    <p class="text-sm text-gray-600 mb-3">${item.desc}</p>
                    <p class="text-xl font-bold text-green-600 mb-3">‚Ç¶${item.price.toLocaleString()}/day</p>
                    <button onclick="bookEquipment('${item.name}', ${item.price})" class="w-full bg-purple-600 text-white px-4 py-3 rounded-lg font-bold">üìÖ Book Now</button>
                </div>
            `).join('');
            document.getElementById('equipmentList').innerHTML = html;
        }

        function bookEquipment(name, price) {
            const info = prompt(`Book ${name}\n\nEnter: Name | Phone | Date | Days\nExample: John Doe | 08012345678 | 2026-03-01 | 3`);
            if (!info) return;
            const [userName, phone, date, days] = info.split('|').map(s => s.trim());
            if (!userName || !phone || !date || !days) return showBanner('Provide all info', 'error');
            
            const total = price * parseInt(days);
            const deposit = Math.round(total * 0.45);
            const balance = total - deposit;

            const msg = `üîß EQUIPMENT BOOKING

Equipment: ${name}
Period: ${days} days from ${date}

üí∞ PAYMENT:
Deposit (45%): ‚Ç¶${deposit.toLocaleString()}
Pay to Opay: ${CFG.opay}

Balance (55%): ‚Ç¶${balance.toLocaleString()}
(Pay to rental partner on pickup)

Customer: ${userName}
Phone: ${phone}

After deposit, we connect you with partner.`;
            
            openWhatsApp(msg);
            showBanner(`Pay ‚Ç¶${deposit.toLocaleString()} to Opay ${CFG.opay}`);
            
            setTimeout(() => {
                alert(`‚úÖ After paying ‚Ç¶${deposit.toLocaleString()} booking fee:\n\n1. We connect you with rental partner\n2. Pay ‚Ç¶${balance.toLocaleString()} to them\n3. Pick up equipment\n\nClick OK to view rental partners.`);
                window.open('https://www.indiamart.com/surveying-equipment.html', '_blank');
            }, 3000);
        }

        // TRAINING FUNCTIONS
        const courses = [
            {name: 'Advanced GIS Mapping', price: 25000, hours: '12', platform: 'Coursera GIS'},
            {name: 'Drone Surveying', price: 45000, hours: '16', platform: 'Udemy Drone'},
            {name: 'Coordinate Systems', price: 20000, hours: '8', platform: 'YouTube GPS'},
            {name: 'AutoCAD for Surveyors', price: 30000, hours: '14', platform: 'Autodesk Learning'}
        ];

        function initTraining() {
            const html = courses.map(c => `
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="font-bold text-lg mb-2">${c.name}</h3>
                    <p class="text-sm text-gray-600 mb-3">${c.hours} hours</p>
                    <p class="text-xl font-bold text-green-600 mb-3">‚Ç¶${c.price.toLocaleString()}</p>
                    <button onclick="enrollCourse('${c.name}', ${c.price}, '${c.platform}')" class="w-full bg-green-600 text-white px-4 py-3 rounded-lg font-bold">üí≥ Enroll Now</button>
                </div>
            `).join('');
            document.getElementById('trainingList').innerHTML = html;
        }

        function enrollCourse(name, price, platform) {
            const platforms = {
                'Coursera GIS': 'https://www.coursera.org/courses?query=gis',
                'Udemy Drone': 'https://www.udemy.com/courses/search/?q=drone%20mapping',
                'YouTube GPS': 'https://www.youtube.com/results?search_query=gps+surveying+tutorial',
                'Autodesk Learning': 'https://www.autodesk.com/certification/learn'
            };

            const msg = `üéì TRAINING ENROLLMENT

Course: ${name}
Price: ‚Ç¶${price.toLocaleString()}

üí∞ PAYMENT:
Opay: ${CFG.opay}
Name: Surveypro

üìö INCLUDED:
‚úì ${platform} access
‚úì Certificate
‚úì WhatsApp support
‚úì Lifetime materials

Pay now, send proof, get instant access!`;
            
            openWhatsApp(msg);
            showBanner(`Pay ‚Ç¶${price.toLocaleString()} to Opay ${CFG.opay}`);
            
            setTimeout(() => {
                alert(`‚úÖ AFTER PAYMENT:\n\nYou get FREE lifetime access to:\n${platform}\n\nClick OK to preview platform now!`);
                window.open(platforms[platform], '_blank');
            }, 2000);
        }

        // SERVICES
        function requestQuote(service) {
            const msg = `Service Quote Request:\n\nService: ${service}\n\nPlease provide location, scope, timeline and special requirements.`;
            openWhatsApp(msg);
        }

        // INIT
        window.addEventListener('DOMContentLoaded', () => {
            initEquipment();
            initTraining();
            console.log('‚úì Surveypro Professional Platform');
        });
    </script>
</body>
</html>
